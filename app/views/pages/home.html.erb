<div class="container-commmitments">
  <h2>Tableau de bord</h2>
  <div class="row">
    <!-- <div class="chart-filters">
    </div> -->
    <div class="col-md-12">
      <canvas id="commitments-statuses" width="500" height="200" data-statuses="<%= @statuses.to_json %>"></canvas>
      <br>
      <br>
      <div class="cards">
        <div class="card-stat">
          <h3>
            <ul id="analytics-dashboard" style="list-style: none; padding-inline-start: 0px;">
              <% total = [] %>
              <% @unpaid_commitments_amount.each do |item| %>
                  <% total << item.amount %>
              <% end %>
              <li><%= number_with_delimiter(total.sum, delimiters: ".") %>€</li>
              <li><p style="font-size: 15px">Total des en-cours</p></li>
            </ul>
          </h3>
        </div>
        <div class="card-stat">
          <h3>
            <ul id="analytics-dashboard" style="list-style: none; padding-inline-start: 0px;">
              <% total = [] %>
              <% @current_month_commitments.each do |commitment| %>
                  <% total << commitment.amount %>
              <% end %>
              <% average = (total.sum / total.length)  %>
              <li><%= number_with_delimiter(average, delimiters: ".") %>€</li>
              <li><p style="font-size: 15px">Montant moyen d'un en-cours</p></li>
              <li><p style="font-size: 10px">(Mois en cours)</p></li>
            </ul>
          </h3>
        </div>
        <div class="card-stat">
          <h3>
            <ul id="analytics-dashboard" style="list-style: none; padding-inline-start: 0px;">
              <% @current_month_commitments.each do |commitment| %>
                  <% total << commitment.amount %>
              <% end %>
              <li><%= number_with_delimiter(total.sum, delimiters: ".") %>€</li>
              <li><p style="font-size: 15px">Montant des en-cours du mois</p></li>
            </ul>
          </h3>
        </div>
      </div>
      <br>
      <br>
      <canvas id="total-amount" width="500" height="200" data-paid="<%= @paid_commitment_amount.to_json %>" data-invoice="<%= @pending_invoice_amount.to_json %>" data-payment="<%= @pending_payment_amount.to_json %>"></canvas>
    </div>
  </div>
</div>

