<div class="container-commmitments">
  <%= render "filters" %>
  <table class="table table-hover" id="table-commitment">
    <thead>
      <tr>
        <th scope="col"></th>
        <th scope="col">Name</th>
        <th scope="col">Amount</th>
        <th scope="col">Recurrence</th>
        <th scope="col">Status</th>
        <th scope="col">Invoice</th>
        <th scope="col"></th>
        <th scope="col"></th>
      </tr>
    </thead>
    <tbody>
      <% @commitments.each do |commitment| %>
        <tr>
          <td><%= image_tag "#{commitment.user.photo}", style:'height:30px;width:30px;border-radius:50%;' %></td>
          <td><%= commitment.supplier.name %></td>
          <td><%= number_with_delimiter(commitment.amount, :delimiter => ',') %></td>
          <td><%= commitment.recurrence %></td>
          <td><%= commitment.status %></td>
          <td>
            <% if commitment.invoice.file.nil? %>
            <% else %>
              <%#= link_to "Download it", commitment.invoice.url %>
              <%= link_to download_file_path(commitment) do %>
                <i class="fas fa-download"></i>
              <% end %>
            <% end %>
          </td>
          <td>
            <%= link_to edit_commitment_path(commitment) do %>
              <i class="fas fa-edit"></i>
            <% end %>
          </td>
          <td><i class="fas fa-trash-alt"></i></td>
        </tr>
      <% end %>
    </tbody>
  </table>
  <%= link_to "Download all invoices", download_files_path(format: :zip) %>
</div>


